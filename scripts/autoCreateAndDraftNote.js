// autoCreateAndDraftNote.js
// 薄いラッパー：既存のCLI引数・動作は維持しつつ、実装は共有ライブラリに委譲

import { runWithCore } from '@aa-0921/note-auto-core';

(async () => {
  await runWithCore(async ({ core, wantsBackground }) => {
    // 題材リスト（エンジニア向けに更新）
    const topics = [
      'エンジニアのメリット',
      'プログラミング学習',
      'エンジニア転職のメリット',
      'エンジニア転職のメリット',
      'エンジニア転職のメリット',
      '未経験からのキャリアチェンジ',
      'フリーランスエンジニアのメリット',
      '初学者の悩み',
      '挫折しないための学習習慣',
      '未経験からのエンジニア転職',
      'リモートワークのメリット',
      'リモートワークで解決できること',
      'エンジニアのコスパがいい理由',
      '副業やフリーランスとしても働きやすい',
      '転職市場での需要が高い',
      '未経験からでも参入しやすい業界',
      '年齢よりスキルが評価されやすい',
      '世界中どこでも仕事ができる',
      '実力主義でキャリアアップしやすい',
      'スタートアップから大企業まで活躍の場所が多い',
      '職種・業界の選択肢が広い（自社開発、受託、メガベンチャーなど）',
      '海外で働きやすい（普遍的なスキル）',
      'スキルを身につければ収入アップしやすい',
      'プログラミング力がつく',
      '論理的思考が鍛えられる',
      '自分のサービスを作れるようになる',
      '新しいテクノロジーに触れ続けられる',
      '英語力が自然と身につくケースも多い（英語のドキュメントが多いため）',
      'ITリテラシーが高くなる',
      '自動化・効率化ができるようになる',
      'アイデアをすぐ形にできる実現力がつく',
      '場所や時間に縛られない生き方ができる',
      '趣味や好きな分野×技術で稼げる',
      '将来性がありAI時代にも強いスキル',
      '家族や友人のサイト・アプリなどを作ってあげられる',
      '自己表現の手段になる',
      '人生の選択肢が増える',
      '学生や若いうちからでも活躍しやすい',
      '永続的に学び続けられる楽しさがある',
      '将来的に起業・サービス開発に結びつけられる',
      'モノづくりの達成感が感じられる',
      '世界中の人々に価値提供ができる',
      '成果物が形として残る',
      '年収が高い傾向がある',
      'IT投資が続く限り市場が拡大し続けている',
    ];

    // 切り口リスト（エンジニア向けに更新）
    const patterns = [
      '一歩踏み込んだ理解',
      '具体的な活用方法',
      '楽にする方法',
      'エンジニアになることのメリット',
      'エンジニアになることのメリット',
      'エンジニアになることのメリット',
      'エンジニアになることのメリット',
      'エンジニアになることのメリット',
      'エンジニアになることのメリット',
      'エンジニアへの一歩を踏み出そう',
      'エンジニアの報酬の高さ',
      'ランキング-トップ5',
      'ランキング-トップ5',
      'ランキング-トップ5',
      'ランキング-トップ5',
      'まつわるQ&Aまとめ',
      'やってはいけないNG行動',
      'プロに聞いた極意',
      '続けるためのモチベーション維持法',
      'ありがちな勘違いと正しいやり方',
      '成功例・失敗例から学ぶ',
      '初心者でもすぐに使える実践的な活用事例',
      '自身の具体的な経験談を交え、読者に共感と学びを提供する',
    ];

    const rewriteConditionsLines = [
      'あなたは知識豊富なベテランエンジニアでプログラミングスクールの現役講師です。',
      '指定の見出し本文が短いため、200文字以上になるよう実体験や具体例、学習アドバイス、キャリアのヒントを交えて厚くリライトしてください。',
      '【注意】',
      '- タイトルや見出しは出力せず、本文のみを返してください。',
      '- 「追加した要素」や「文字数」などのメタ情報は一切出力しないでください。',
      '- 不要な記号や記号列（「】」「*」「#」など）も使用しないでください。',
      '- 文章は話し言葉やカジュアルな表現を避け、できるだけ丁寧な敬語でまとめてください。',
      '- です・ます・で統一してください。',
      '- 文章のみを返してください。',
      '- 文章は日本語で返してください。',
      '- 英語や他言語が混じらないようにしてください。絶対に英語は使用しないでください。',
      '- あなたはプロのエンジニアで、プロの編集者で、エンジニアスクールの運営者です。',
      '- 読みやすさを重視してください',
      '- 改行をなるべく多めに入れて、読みやすくしてください。',
      '- 文章作成時に多めに、たくさん絵文字を使用してください。各行に1つくらいは入れてください。',
      '- 元々の文章に沿った内容になるようにしてください。',
      '- noteの正しいマークダウン記法のみを使ってください。',
      '- 箇条書きはマークダウンではなく、「・ 」で表現してください。',
      '- 番号付きリストは使わないようにしてください。',
    ];

    // LLM用システムプロンプト（英語禁止の明示）
    const systemMessage = 'あなたは日本語のnote記事編集者です。絶対に英語や他言語は使用せず、日本語のみで記事を作成してください。英語が混じった場合は、必ず日本語に翻訳して出力してください。';

    // 記事生成プロンプト条件（エンジニア向けに更新）
    const articleConditionsLines = [
      'タイトル、本文、ハッシュタグ（#から始まるもの）を含めてください。',
      'タイトルは1行目に「# [実際のタイトル]」として記載してください。',
      '「# タイトル」という文字列ではなく、実際の記事タイトルを入れてください。',
      '本文は見出しや箇条書きも交えて1000文字程度で丁寧にまとめてください。',
      'ハッシュタグは記事末尾に「#〇〇 #〇〇 ...」の形式でまとめてください。',
      'すべて日本語で出力してください。',
      '英語や他言語が混じらないようにしてください。絶対に英語は使用しないでください。',
      '切り口に沿った内容になるようにしてください。',
      'あなたはプロのエンジニアで、プロの編集者で、エンジニアスクールの講師「ゆーき」です。',
      '記事内で講師名を出す場合は必ず「ゆーき」と表記してください。',
      '読みやすさを重視してください。',
      '可能であればランキング形式にしてください。',
      '改行を多めに入れて、読みやすくしてください。',
      '各行に1つ程度、絵文字を使用してください。',
      'プログラミング初学者・駆け出しエンジニアがつい読みたくなる、やさしく親しみやすい内容にしてください。',
      '現役のプロエンジニア向けの難しい内容や専門的すぎる話題は避けてください。',
      'noteの正しいマークダウン記法のみを使ってください。',
      '箇条書きはマークダウンではなく、「・ 」で表現してください。',
      '見出しはh2（## 見出し）・h3（### 見出し）のみ。',
      '番号付きリストは使わないでください。',
      'h1（# タイトル）はタイトル行のみで本文中では使わないでください。',
      'その他のマークダウンやHTMLタグは使わないでください。',
      '言語やフレームワークを進める場合は、Ruby（Rails）, JavaScript（React）を勧めるようにしてください。',
    ];

    // タグ生成の指示文（エンジニア向け固定タグを必須含有）
    const tagsInstruction =
      '記事内容から最も関連する日本語タグを3〜5個生成し、半角スペース区切りで出力してください。必ず「#エンジニア #プログラミング #開発 #PR」を含めてください。本文や説明は禁止。';

    // タイトル装飾用絵文字（参考実装のセット）
    const titleEmojis = [
      '❤️',
      '🌸',
      '🛑',
      '㊙︎',
      '🟥',
      '🈲',
      '🉐',
      '㊗️',
      '㊙️',
      '⭕',
      '‼️',
      '🎉',
    ];

    // 記事内に挿入するアフィリエイト文（エンジニア向けに更新）
    const affiliateLinks = [
      [
        '',
        '📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　',
        'https://amzn.to/4mTYY6V',
        '👆まずは言葉を覚えると知識と知識が繋がりやすくなります😊コスパ最強です👍',
        '📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　📚　💡　',
        '',
      ].join('\n'),

      [
        '',
        '🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟',
        'https://amzn.to/4goaSUk',
        '👆成功法則を学べる良書です😊人生を変えるきっかけになるかもしれません✨',
        '🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟　✨　🌟',
        '',
      ].join('\n'),

      [
        '',
        '💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧',
        'https://amzn.to/3WcMnzT',
        '👆コスパ抜群の水分補給アイテムです⭕体調管理に欠かせません✨',
        '💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧　💙　💧',
        '',
      ].join('\n'),

      [
        '',
        '🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤',
        'https://amzn.to/46DCvEs',
        '👆炭酸の刺激で血行が良くなり、疲れが取れやすくなります🌸',
        'お腹の調子も整えて、スッキリとした毎日をサポートしてくれます㊙️',
        '🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤　💨　🥤',
        '',
      ].join('\n'),

      [
        '',
        '🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅',
        'https://amzn.to/4pAZwAB',
        '👆トマトの栄養がたっぷり詰まったジュースです💕',
        '美容効果や健康維持に役立ち、忙しい時でも簡単に栄養を摂取できます💪',
        '🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅　❤️　🍅',
        '',
      ].join('\n'),

      [
        '',
        '🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵',
        'https://amzn.to/4nOiNN9',
        '👆緑茶の健康成分がたっぷり含まれ、代謝アップや健康維持に効果的です㊙️',
        '🍵リラックス効果もあり、集中力アップにもおすすめの飲み物です🍵',
        '🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵　🌿　🍵',
        '',
      ].join('\n'),

      [
        '',
        '💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪',
        'https://amzn.to/48uTL0X',
        '👆高タンパクで栄養バランスの良いプロテインバーです💪',
        '筋肉づくりや健康維持に最適で、おやつ代わりにもピッタリです🌸',
        '💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪　🍫　💪',
        '',
      ].join('\n'),

      [
        '',
        '🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚',
        'https://amzn.to/42KiV8b',
        '👆発芽米は栄養価が高く、ストレス軽減や健康維持に効果的です🍚',
        '🍚普通のお米より栄養豊富で、美味しく健康になれる優れた選択肢です💊',
        '🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚　🌾　🍚',
        '',
      ].join('\n'),

      // ー↓↓↓ーーエンジニアのアフィリエイトリンク使用ーーーーーーーーーーーーーーーーーーーーーーーーーー
      [
        '',
        '🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠',
        'https://amzn.to/3ICPi1R',
        '👆思考法についてすぐに実践できるものが多く即効性がありました😊',
        '米マイクロソフトのエンジニアの思考法が学べ参考になります💪',
        '🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠　💡　🧠',
        '',
      ].join('\n'),

      [
        '',
        '🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀',
        'https://amzn.to/46sTQkE',
        '👆これからITエンジニアを目指す方に非常におすすめです！',
        'IT業界を広く把握した上で自分に合った方向性を見つけることができます💪',
        '🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀　💻　🚀',
        '',
      ].join('\n'),

      [
        '',
        '📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖',
        'https://amzn.to/4nQh61B',
        '👆良いコードを書く上で指針となる前提・原則・思想を一通り学ぶことができます😊',
        'DRY原則から始まり、様々な言葉の意味を把握しておくことは大事です💪',
        '📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖　⚙️　📖',
        '',
      ].join('\n'),

      [
        '',
        '💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪',
        'https://amzn.to/4nziS7B',
        '👆どんな思考でどんな行動を積み重ねればエンジニアとして強くなれるのかが分かります😊',
        '先を見据えて行動するための一冊です💪',
        '💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪　🎯　💪',
        '',
      ].join('\n')
      // ー↑↑↑ーーエンジニアのアフィリエイトリンク使用ーーーーーーーーーーーーーーーーーーーーーーーーーー

    ];

    // マガジン誘導文（エンジニア向けに更新）
    const magazinePromotion = [
      '💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　',
      '✅「プログラミング学習で挫折した…」「独学で限界を感じている」😢',
      '',
      'そんな悩みを持つあなたに、マンツーマンレッスンで確実にスキルアップできるマガジンを用意しました。',
      '',
      '【こっそり周りに差をつける💪】',
      '✔ 学習の順序が分からない',
      '✔ 独学で挫折した経験がある',
      '✔ 確実にスキルアップしたい',
      'そんな方にピッタリです。',
      '',
      'プロのエンジニア講師「ゆーき」が、あなたのペースに合わせて丁寧にサポートします。',
      '無料で読める学習のコツや、効率的なプログラミング学習法をお届けします。',
      '',
      'https://note.com/enginner_skill/m/mdb5e5e9f007d',
      '💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　💻　✨　',
    ].join('\n');

    // アソシエイト表記文（エンジニア向けに更新）
    const amazonAssociateText =
      'Amazon のアソシエイトとして、「エンジニアスクール💻マンツーマンレッスン」は適格販売により収入を得ています。';

    // 記事の自動生成と下書き保存機能を実行
    await core.runAutoCreateAndDraftNote({
      background: wantsBackground,
      topics,
      patterns,
      systemMessage,
      articleConditionsLines,
      rewriteConditionsLines,
      tagsInstruction,
      titleEmojis,
      affiliateLinks,
      magazinePromotion,
      amazonAssociateText,
    });
    console.log('記事の自動生成と下書き保存が完了しました');
  });
})();
